"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Loop=function(){function i(e,t){_classCallCheck(this,i),this.ele=e,this.imgArr=t,this.oUl=this.ele.querySelector("ul"),this.oOl=this.ele.querySelector("ol"),this.index=1,this.liWidth,this.time,this.bool=!0}return _createClass(i,[{key:"init",value:function(){this.setGo(),this.autoLoop(),this.mouse(),this.click(),this.hid()}},{key:"setGo",value:function(){var i="",l="";this.imgArr.forEach(function(e,t){i+='<li><img src="./images/'.concat(e.path,'"></li>'),l+=0===t?'<li class="active" num='.concat(t,' name="olli"></li>'):"<li num=".concat(t,' name="olli"></li>')}),this.oUl.innerHTML=i,this.oOl.innerHTML=l;var e=this.oUl.querySelectorAll("li")[0].cloneNode(!0),t=this.oUl.querySelectorAll("li")[this.oUl.querySelectorAll("li").length-1].cloneNode(!0);this.oUl.appendChild(e),this.oUl.insertBefore(t,this.oUl.querySelectorAll("li")[0]),this.oUl.style.width=(this.imgArr.length+2)*e.offsetWidth+"px",this.oUl.style.left=-this.index*e.offsetWidth+"px",this.liWidth=this.oUl.querySelectorAll("li")[0].offsetWidth}},{key:"move",value:function(o,n,s){var r={},e=function(l){r[l]=setInterval(function(){var e="opacity"===l?100*window.getComputedStyle(o)[l]:parseInt(window.getComputedStyle(o)[l]),t="opacity"===l?100*n[l]:parseInt(n[l]),i=(t-e)/10;(e+=i=0<i?Math.ceil(i):Math.floor(i),o.style[l]="opacity"===l?e/100:e+"px",t===e)&&(clearInterval(r[l]),delete r[l],0===Object.keys(r).length&&(s="function"==typeof s?s():" "))},30)};for(var t in n)e(t)}},{key:"autoLoop",value:function(){var e=this;this.time=setInterval(function(){e.index++,e.focus(),e.move(e.oUl,{left:-e.index*e.liWidth},e.end.bind(e)),console.log(e.liWidth),console.log(e.index)},3e3)}},{key:"end",value:function(){this.index===this.oUl.querySelectorAll("li").length-1&&(this.index=1),0===this.index&&(this.index=this.oUl.querySelectorAll("li").length-2),this.oUl.style.left=-this.index*this.liWidth+"px",this.bool=!0}},{key:"delClass",value:function(e,i){var l=e.className.split(" ");l.forEach(function(e,t){e===i&&l.splice(t,1)}),e.className=l.join(" ")}},{key:"focus",value:function(){var i=this;this.oOl.querySelectorAll("li").forEach(function(e,t){i.delClass(e,"active")}),this.index===this.oUl.querySelectorAll("li").length-1?this.oOl.querySelectorAll("li")[0].className+=" active":0===this.index?this.oOl.querySelectorAll("li")[this.oOl.querySelectorAll("li").length-2].className+=" active":this.oOl.querySelectorAll("li")[this.index-1].className+=" active"}},{key:"mouse",value:function(){var e=this;this.ele.addEventListener("mouseenter",function(){clearInterval(e.time)}),this.ele.addEventListener("mouseleave",function(){e.autoLoop()})}},{key:"click",value:function(){var t=this;this.ele.addEventListener("click",function(e){if("olli"===(e=e||window.event).target.getAttribute("name")){if(!t.bool)return;t.bool=!1,t.index=e.target.getAttribute("num")-0+1,console.log(t.index),t.focus(),t.move(t.oUl,{left:-t.index*t.liWidth},t.end.bind(t)),console.log(t.liWidth)}})}},{key:"hid",value:function(){var e=this;document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?clearInterval(e.time):"visible"===document.visibilityState&&e.autoLoop()})}}]),i}();